// Phase 9 demo: print interpolation with scalar substitution
stream data = tap("test_data/input_10.csv")

// Compute statistics
let mn = min(data)
let mx = max(data)
let range = mx - mn
let midpoint = (mn + mx) / 2.0

// Normalize
let divisor = if range > 0.0 then range else 1.0
stream normalized = data |> subtract(mn) |> divide(divisor)

// Print with interpolation and precision
print("Input range: {mn:.2} to {mx:.2}")
print("Range = {range:.4}, midpoint = {midpoint:.2}")
print("Escaped braces: {{not interpolated}}")
print("Raw values: min={mn}, max={mx}")

emit(normalized, "test_data/output_interpolation.csv")
print("Done â€” {mn:.1} to {mx:.1} normalized to 0..1")
