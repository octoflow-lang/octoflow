#version 450
// uint_to_float â€” Convert uint buffer to float buffer
//
// Needed because OctoFlow arrays are float, but histogram uses uint atomics.
// Simple 1:1 conversion: out[i] = float(in[i])
//
// 2 bindings (input uint[], output float[]), 1 push constant (4 bytes)
layout(local_size_x = 256) in;

layout(set=0, binding=0) buffer Input  { uint  data[]; } inp;
layout(set=0, binding=1) buffer Output { float data[]; } out_;
layout(push_constant) uniform PC { float n_elements; } pc;

void main() {
    uint gid = gl_GlobalInvocationID.x;
    if (gid >= uint(pc.n_elements)) return;
    out_.data[gid] = float(inp.data[gid]);
}
