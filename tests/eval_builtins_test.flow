// Test eval.flow builtin implementations
// Run natively first to get expected output, then through eval.flow

// ── Statistics ──
let mut nums = []
push(nums, 10.0)
push(nums, 20.0)
push(nums, 30.0)
push(nums, 40.0)
push(nums, 50.0)
let m = mean(nums)
print("mean: {m}")
let med = median(nums)
print("median: {med}")
let v = variance(nums)
print("variance: {v}")
let sd = stddev(nums)
print("stddev: {sd}")

// ── Array queries ──
let mut arr = []
push(arr, 5.0)
push(arr, 3.0)
push(arr, 8.0)
push(arr, 1.0)
push(arr, 9.0)
let f = find(arr, 8.0)
print("find 8: {f}")
let fi = first(arr)
print("first: {fi}")
let la = last(arr)
print("last: {la}")
let mn = min_val(arr)
print("min_val: {mn}")
let mx = max_val(arr)
print("max_val: {mx}")

// ── Slice ──
let sl = slice(arr, 1, 3)
let sl_n = len(sl)
let sl0 = sl[0]
let sl1 = sl[1]
print("slice len: {sl_n}")
print("slice: {sl0} {sl1}")

// ── Range array ──
let rng = range_array(0, 5)
let rn = len(rng)
let r0 = rng[0]
let r1 = rng[1]
let r4 = rng[4]
print("range len: {rn}")
print("range: {r0} {r1} {r4}")

// ── Linear algebra ──
let mut a = []
push(a, 1.0)
push(a, 2.0)
push(a, 3.0)
let mut b = []
push(b, 4.0)
push(b, 5.0)
push(b, 6.0)
let d = dot(a, b)
print("dot: {d}")
let n = norm(a)
print("norm: {n}")

// ── Path utilities ──
let ext = file_ext("hello.txt")
print("ext: {ext}")
let fn1 = file_name("/path/to/file.txt")
print("filename: {fn1}")
let dn = dirname("/path/to/file.txt")
print("dirname: {dn}")

// ── Date arithmetic ──
let t0 = 1000.0
let t1 = add_seconds(t0, 60.0)
print("add_seconds: {t1}")
let t2 = add_hours(t0, 2.0)
print("add_hours: {t2}")
let ds = diff_seconds(t0, t1)
print("diff_seconds: {ds}")
let dh = diff_hours(t0, t2)
print("diff_hours: {dh}")

// ── Hex encoding ──
let h = hex_encode("ABC")
print("hex: {h}")
let hd = hex_decode(h)
print("hex_decode: {hd}")

print("DONE")
